import{M as h}from"./main-R5KTlRTc.js";import{s,a as p}from"./modal-CQ86hjxP.js";document.getElementById("nome").textContent=localStorage.getItem("usuario");function f(){localStorage.clear(),window.location.href="loginCoord.html"}window.logout=f;document.getElementById("cadastro-form").addEventListener("submit",async t=>{t.preventDefault();const n=localStorage.getItem("token"),o=localStorage.getItem("usuario"),a=document.getElementById("novoUsuario").value,e=document.getElementById("email").value,r=document.getElementById("senha").value,i=await fetch("http://localhost:3000/api/usuarios/cadastrar-treinador",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({usuarioLogado:o,novoUsuario:a,email:e,senha:r})}),g=await i.json();i.ok?(s("Alerta","Treinador cadastrado com sucesso!"),document.getElementById("cadastro-form").reset(),d()):s("Alerta",g.mensagem||"Erro ao cadastrar.")});async function d(){const t=localStorage.getItem("token"),o=await(await fetch("http://localhost:3000/api/usuarios/treinadores",{headers:{Authorization:`Bearer ${t}`}})).json(),a=document.getElementById("lista-treinadores");a.innerHTML="",o.forEach(e=>{const r=document.createElement("li");r.innerHTML=`
      <strong>${e.usuario}</strong> - ${e.email}
      <button onclick="editarTreinador('${e._id}', '${e.usuario}', '${e.email}')">Editar</button>
      <button onclick="removerTreinador('${e._id}')">Remover</button>
    `,a.appendChild(r)})}async function E(t){if(await p("Confirmação","Tem certeza que deseja remover este treinador?")){const o=localStorage.getItem("token"),e=await(await fetch(`http://localhost:3000/api/usuarios/remover-treinador/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}})).json();s("Alerta",e.mensagem),d()}}let l;const c=document.getElementById("editTreinadorId"),m=document.getElementById("editNome"),u=document.getElementById("editEmail");function I(t,n,o){c.value=t,m.value=n,u.value=o;const a=document.getElementById("editTrainerModal");l=new h(a),l.show()}document.getElementById("editTrainerForm").addEventListener("submit",async t=>{t.preventDefault();const n=c.value,o=m.value,a=u.value,e=localStorage.getItem("token"),i=await(await fetch(`http://localhost:3000/api/usuarios/editar-treinador/${n}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({nome:o,email:a})})).json();s("Alerta",i.mensagem),l.hide(),d()});d();window.editarTreinador=I;window.removerTreinador=E;
